kind: app
metadata:
  author: Dify Assistant
  description: æ¼”ç¤ºå¤–éƒ¨çŸ¥è¯†åº“é›†æˆåŠŸèƒ½çš„å®Œæ•´å·¥ä½œæµ
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  name: å¤–éƒ¨çŸ¥è¯†åº“æ¼”ç¤ºå·¥ä½œæµ
  tags:
  - knowledge
  - external
  - demo
spec:
  app:
    description: æ¼”ç¤ºå¤–éƒ¨çŸ¥è¯†åº“é›†æˆåŠŸèƒ½çš„å®Œæ•´å·¥ä½œæµ
    icon: ğŸ¤–
    icon_background: '#FFEAD5'
    mode: workflow
    name: å¤–éƒ¨çŸ¥è¯†åº“æ¼”ç¤ºå·¥ä½œæµ
    tags:
    - knowledge
    - external
    - demo
    workflow:
      features:
        citation: true
        file_upload:
          enabled: false
        more_like_this:
          enabled: false
        opening_statement: æ‚¨å¥½ï¼æˆ‘æ˜¯æ”¯æŒå¤–éƒ¨çŸ¥è¯†åº“æ£€ç´¢çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œè¯·å‘Šè¯‰æˆ‘æ‚¨çš„é—®é¢˜ã€‚
        retriever_resource:
          enabled: true
        sensitive_word_avoidance:
          enabled: false
        speech_to_text:
          enabled: false
        suggested_questions:
        - ä»€ä¹ˆæ˜¯å¤–éƒ¨çŸ¥è¯†åº“ï¼Ÿ
        - å¤–éƒ¨çŸ¥è¯†åº“æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ
        - å¦‚ä½•é…ç½®å¤–éƒ¨çŸ¥è¯†åº“APIï¼Ÿ
        - å¤–éƒ¨çŸ¥è¯†åº“æ”¯æŒå“ªäº›åŠŸèƒ½ï¼Ÿ
        suggested_questions_after_answer:
          enabled: true
        system_parameters: []
        text_to_speech:
          enabled: false
        user_input_form: []
      graph:
        edges:
        - id: start-to-knowledge
          source: start
          target: knowledge_retrieval
        - id: knowledge-to-llm
          source: knowledge_retrieval
          target: llm
        - id: llm-to-end
          source: llm
          target: end
        nodes:
        - data:
            desc: å·¥ä½œæµå¼€å§‹èŠ‚ç‚¹
            title: å¼€å§‹
            variables:
            - label: ç”¨æˆ·é—®é¢˜
              max_length: 1000
              required: true
              type: text-input
              variable: query
          id: start
          type: start
        - data:
            dataset_ids:
            - external_dataset_id
            default_value_dict:
              result: []
            desc: ä»å¤–éƒ¨çŸ¥è¯†åº“æ£€ç´¢ç›¸å…³ä¿¡æ¯
            error_strategy: fallback
            metadata_filtering_mode: disabled
            multiple_retrieval_config:
              reranking_enable: false
              reranking_mode: reranking_model
              score_threshold: 0.5
              top_k: 3
            query_variable_selector:
            - start
            - query
            retrieval_mode: multiple
            retry_config:
              enabled: true
              max_retries: 2
              retry_interval: 1
            title: çŸ¥è¯†æ£€ç´¢
            vision:
              configs:
                detail: high
              enabled: false
          id: knowledge_retrieval
          type: knowledge-retrieval
        - data:
            default_value_dict:
              text: æŠ±æ­‰ï¼Œæˆ‘æ— æ³•å¤„ç†æ‚¨çš„é—®é¢˜ã€‚
            desc: ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹å¤„ç†æ£€ç´¢ç»“æœå¹¶ç”Ÿæˆå›ç­”
            error_strategy: fallback
            model:
              completion_params:
                max_tokens: 1000
                temperature: 0.7
              mode: chat
              name: gpt-3.5-turbo
              provider: openai
            prompt_template:
            - role: system
              text: 'ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œè¯·åŸºäºæä¾›çš„çŸ¥è¯†åº“ä¿¡æ¯å›ç­”ç”¨æˆ·é—®é¢˜ã€‚


                è¯·éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

                1. åŸºäºæ£€ç´¢åˆ°çš„çŸ¥è¯†åº“å†…å®¹å›ç­”é—®é¢˜

                2. å¦‚æœçŸ¥è¯†åº“ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·æ˜ç¡®è¯´æ˜

                3. å›ç­”è¦å‡†ç¡®ã€æœ‰ç”¨ã€ç®€æ´

                4. å¼•ç”¨æ¥æºæ—¶è¯·æ³¨æ˜å‡ºå¤„'
            - role: user
              text: 'ç”¨æˆ·é—®é¢˜ï¼š{{#start.query#}}


                çŸ¥è¯†åº“æ£€ç´¢ç»“æœï¼š

                {{#knowledge_retrieval.result#}}'
            retry_config:
              enabled: true
              max_retries: 2
              retry_interval: 1
            title: LLMå¤„ç†
            vision:
              configs:
                detail: high
              enabled: false
          id: llm
          type: llm
        - data:
            desc: å·¥ä½œæµç»“æŸèŠ‚ç‚¹
            outputs:
            - value_selector:
              - llm
              - text
              variable: answer
            title: ç»“æŸ
          id: end
          type: end
version: 0.4.0
